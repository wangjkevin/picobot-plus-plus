
<!--
This program is free software: you can redistribute it and/or modify it 
under the terms of the GNU Affero General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.

# Z. Dodds and many other authors, 2005 onward..
# W. Vonnegut, especially!
-->

<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" />
<title>Picobot</title>
</head>

<body body="" bgcolor="#e1e1e1">

<script type="text/javascript" src="./maps.js"></script>
<script type="text/javascript" src="./engine.js" defer></script>  <!-- use the defer keyword to only activate the engine _after_ the DOM is loaded -->

<!-- create the new drawing canvas  -->
<table border="0">

<tbody>
<tr>

	<td>
		<!-- Here, we build the board! Using sexy javascript! -->
		<script language="JavaScript" type="text/javascript">

			
			/////////////////////////////////////////////////////////////////////////////////////////////
			// Some horrible browsers do not support the javascript map function, so we add it back in!//
			/////////////////////////////////////////////////////////////////////////////////////////////
			if (!Array.prototype.map)
			{
				Array.prototype.map = function(fun /*, thisp*/)
				{
					var len = this.length;
					if (typeof fun != "function")
						throw new TypeError();

					var res = new Array(len);
					var thisp = arguments[1];
					for (var i = 0; i < len; i++)
					{
						if (i in this)
							res[i] = fun.call(thisp, this[i], i, this);
					}

					return res;
				};
			}
			/////////////////////////////////////////////////////////////////////////////////////////////
			/////////////////////////////////////////////////////////////////////////////////////////////
			
			var rows = 25
			var cols = 25
			var len = 20
			
			document.write('<div id="myCanvas" style="position: relative; height: '+rows*len+'px; width: '+cols*len+'px; top: 0px; left: 0px;">');
			for (var i=0;i<rows;i++)
			{
				for (var j=0;j<cols;j++)
				{
					document.write('<div id="r' + i + 'c' + j + '" style="position:absolute; top:' +len*i+ 'px; left:' +len*j+ 'px; width:' +len+ 'px; height:' +len+ 'px; background-color:white;" onmousedown="toggle_wall('+i+','+j+');"><\/div>');
				}
			}
			document.write('<\/div>');
			
		</script> 

		<!-- end of myCanvas div -->

		<form name="Controls">
			<table style="width: 100%; text-align: center;" border="0" cellpadding="2">
				<tbody>

					<tr>
					<td><input name="Go" value="Go" onclick="go();" type="button"></td>
					<td><input name="Stop" value="Stop" onclick="stop();" type="button"></td>
					<td><input name="Step" value="Step" onclick="update();" type="button"></td>
					<td><input name="Reset" value="Reset" onclick="stop();fullReset();" type="button"></td>
					<td><input name="Map-" value="<--" onclick="stop();changeMap(-1);document.calc.mapi.value = getCMI();" type="button"> MAP 
					<input name="Map+" value="-->" onclick="stop();changeMap(1);document.calc.mapi.value = getCMI();" type="button"></td>
					</tr>

				</tbody>

			</table>

			<div style="text-align: center; margin: 0.5rem;">

				<input name="Speed" id="speed-slider" type="range">
				<div>Speed Slider</div>

			</div>


			<table style="width: 100%; text-align: center; background-color: rgb(238, 238, 170);">
				<tbody>

					<tr>
					<td><textarea readonly="readonly" name="state" id="state" rows="1" cols="3" size="10" style="overflow: hidden; text-align: center;"></textarea></td>
					<td><textarea readonly="readonly" name="surroundings" id="surroundings" rows="1" cols="5" style="overflow: hidden; text-align: center;"></textarea></td>
					<td><textarea readonly="readonly" name="progress" id="progress" rows="1" cols="10" style="overflow: hidden; text-align: center;"></textarea></td>	
					</tr>

					<tr>
					<td width="33%"> State </td>
					<td width="33%"> Surroundings </td> 
					<td width="33%"> Cells to go </td>
					</tr>

				</tbody>
			</table>

			<table style="width: 100%; text-align: center; background-color: rgb(238, 238, 170);">
				<tbody>

					<tr>
					<td><textarea name="currentrule" readonly="readonly" id="currentrule" rows="1" cols="30" style="overflow: hidden; text-align: center;"> </textarea></td>
					<td><textarea name="nextrule" readonly="readonly" id="nextrule" rows="1" cols="30" style="overflow: hidden; text-align: center;"> </textarea></td>
					</tr>

					<tr>
					<td> Previous Rule </td>
					<td> Next Rule </td>
					</tr>
					
				</tbody>
			</table>

			<table style="width: 100%; text-align: center; background-color: rgb(238, 238, 170);">
				<tbody>

					<tr>
					<td><input name="West" value="West" onclick="stop();teleportRobot('W');" type="button"></td>
					<td><input name="East" value="East" onclick="stop();teleportRobot('E');" type="button"></td>
					<td> - Teleport Robot - </td>
					<td><input name="North" value="North" onclick="stop();teleportRobot('N');" type="button"></td>
					<td><input name="South" value="South" onclick="stop();teleportRobot('S');" type="button"></td>
					</tr>

				</tbody>
			</table>
		</form>
	</td>
	<td> <!-- right-hand side -->
		<form name="calc" method="post" action="./picouploader.py">
			<table border="0">
				<tbody>
					<tr>
					
						<td>
							<center><h1>Picobot</h1></center>
						</td>
						
					</tr>
					<tr>
				
						<td>
						  							  <center><b>Rules</b></center>
						  							  
<textarea name="rules" id="rules" rows="20" cols="60" style="font-family: courier; font-weight: bold;">
"""
Welcome to Picobot!
"""

#
# Hashtag lines are optional comments
#

# if in state 0

0 x*** -&gt; N 0   # nothing N? Go N. (stay in state 0)

0 N*** -&gt; W 1   # wall to N? Go W. (change to state 1)


# if in state 1

1 ***x -&gt; S 1   # nothing S? Go S. (stay in state 1)

1 ***S -&gt; X 0   # wall to S? Don't move.(change to state 0)
</textarea>
						</td>
				
				</tr>
					<tr>
					
						<td>
							<center>
								<input name="add" value="Enter rules for Picobot" onclick="stop();document.calc.mesg.value = computeRules(document.calc.rules.value);" type="button">&nbsp;
								<input name="mapi" value="0" type="hidden"> 
							</center>
						</td>
					
					</tr>
					
					<tr>
					
						<td>
							<center>
						  Be sure to hit "Enter rules" after making changes.
							</center>
						</td>
					
					</tr>
					<tr>
				
						<td>
						  <br>
    					  <center>
               <b>Messages</b>
                </center>
							<textarea readonly="readonly" id="mesg" name="mesg" rows="10" cols="60" style="font-family: courier;font-weight: bold;"> </textarea>
						</td>
						
					</tr>
					<tr>
					
				</tr>
				</tbody>
			</table>
		</form>
	</td>
	
</tr>
</tbody>
</table>

<br><br>

</body>
</html>

